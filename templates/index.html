<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Configurator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        function copyToClipboard() {
            const textArea = document.getElementById("generatedContent");
            textArea.select();
            document.execCommand("copy");
            alert("Copied to clipboard!");
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Custom Arduino USB Name</h1>
        <h6 class="text-center">for Arduino boards with native USB support (Leonardo, Micro, ProMicro, Due)</h6>
        <div class="row mt-4">
            <!-- Column 1: Form and Generated Content -->
            <div class="col-md-4">
                <form method="POST" class="mt-5">
                    <div class="mb-3">
                        <label for="device_name" class="form-label"><strong>Device Name</strong></label>
                        <input type="text" class="form-control" id="device_name" name="device_name" required>
                    </div>
                    <div class="mb-3">
                        <label for="manufacturer" class="form-label"><strong>Manufacturer</strong></label>
                        <input type="text" class="form-control" id="manufacturer" name="manufacturer" required>
                    </div>
                    <div class="mb-3">
                        <label for="pid" class="form-label"><strong>PID</strong> (Hex Autogenerated)</label>
                        <input type="text" class="form-control" id="pid" name="pid" value="{{ pid }}" readonly>
                    </div>
                    <button type="submit" class="btn btn-warning">Generate Device Custom Name</button>
                </form>

                {% if generated_content %}
                <div class="mt-5">
                    <h6>Paste this &#128071; at the end of <code>boards.txt</code></h6>
                    <button class="btn btn-success mt-2 mb-2" onclick="copyToClipboard()">Copy to Clipboard</button>
                    <textarea id="generatedContent" class="form-control" rows="10" readonly style="font-size: 0.8rem;">{{ generated_content }}</textarea>
                </div>
                {% endif %}
            </div>

            <!-- Column 2: Empty -->
            <div class="col-md-4">
                <!-- Empty column -->
            </div>

            <!-- Column 3: Instructions -->
            <div class="col-md-4 mt-5" style="font-size: 0.8rem;">
                <h6>Instructions</h6>
                <ol>
                    <li>Close the Arduino IDE if it is open.</li>
                    <li>Locate <strong>and backup</strong> the <code>boards.txt</code> file in your Arduino installation directory. This file is usually found in the following path:
                        <ul>
                            <li>Windows: <code>C:\Users\your_user_name\Documents\ArduinoData\packages\arduino\hardware\avr\1.8.6</code></li>
                            <li>macOS: <code>/Applications/Arduino.app/Contents/Java/hardware/arduino/avr/boards.txt</code></li>
                            <li>Linux: <code>/usr/share/arduino/hardware/arduino/avr/boards.txt</code></li>
                        </ul>
                    </li>
                    <li>Open the <code>boards.txt</code> file in a text editor.</li>
                    <li><strong>At the end of the file</strong> , add the text copied to clipboard.</li>
                    <li>Save the <code>boards.txt</code> file.</li>
                    <li>Open the Arduino IDE and select your board from the Tools > Board menu.</li>
                    <li>Select the correct port from the Tools > Port menu.</li>
                    <li>Upload a sketch to your board to test the new USB name.</li>
                </ol>
            </div>
        </div>
    </div>
</body>
</html>